{"version":3,"sources":["webpack:///./src/ui/src/components/ThumbnailCard/index.js","webpack:///./src/ui/src/components/ThumbnailCard/ThumbnailCard.js","webpack:///./src/ui/src/components/PageThumbnailsGrid/PageThumbnailsGrid.js","webpack:///./src/ui/src/components/PageThumbnailsGrid/index.js","webpack:///./src/ui/src/components/ThumbnailCard/ThumbnailCard.scss?2b1a"],"names":["ThumbnailCard","src","onChange","checked","index","thumbnail","img","currentSrc","url","toDataURL","className","alt","onClick","Choice","id","name","i","PageThumbnailsGrid","document","onThumbnailSelected","selectedThumbnails","onfileLoadedHandler","useState","thumbnails","setThumbnails","completedPages","setCompletedPagesCount","t","useTranslation","useEffect","inFlightPromiseIds","pageCount","getPageCount","thumbnailPromises","thumbnailPromise","Promise","resolve","promiseId","loadThumbnail","result","pageNumber","push","all","sortedThumbnails","sort","a","b","length","generateThumbnails","forEach","cancelLoadThumbnail","map","key","processText","module","exports"],"mappings":"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","file":"chunks/1.chunk.js","sourcesContent":["import ThumbnailCard from './ThumbnailCard';\n\nexport default ThumbnailCard;","import React from 'react';\nimport Choice from '../Choice/Choice';\nimport './ThumbnailCard.scss';\n\nconst ThumbnailCard = ({ onChange, checked, index, thumbnail }) => {\n  let img = null;\n\n  if (thumbnail) {\n    let src;\n    if (thumbnail.currentSrc) {\n      src = thumbnail.currentSrc;\n    } else if (thumbnail.url) {\n      src = thumbnail.url;\n    } else if (thumbnail.toDataURL) {\n      src = thumbnail.toDataURL();\n    }\n\n    img = <img className=\"thumb-card-img\" alt=\"img_name\" src={src} />;\n  }\n\n  return (\n    <div className=\"thumb-card\" onClick={onChange}>\n      <div className='thumb-body'>\n        <div className=\"thumb-image\">\n          {img}\n        </div>\n        <Choice\n          id={`custom-checkbox-${index}`}\n          name={`thumb${index}`}\n          checked={checked}\n        />\n      </div>\n      <div className=\"thumb-card-title\">{index + 1}</div>\n    </div>\n  );\n};\n\nexport default ThumbnailCard;","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport ThumbnailCard from 'components/ThumbnailCard';\n\nfunction PageThumbnailsGrid({ document, onThumbnailSelected, selectedThumbnails, onfileLoadedHandler }) {\n  const [thumbnails, setThumbnails] = useState([]);\n  const [completedPages, setCompletedPagesCount] = useState(0);\n  const [t] = useTranslation();\n\n  useEffect(() => {\n    const inFlightPromiseIds = [];\n    async function generateThumbnails() {\n      const thumbnails = [];\n      const pageCount = document.getPageCount();\n      const thumbnailPromises = [];\n      for (let i = 1; i <= pageCount; i++) {\n        const thumbnailPromise = new Promise((resolve) => {\n          const promiseId = document.loadThumbnail(i, (result) => {\n            let thumbnail;\n            // If we get an embedded thumbnail we set the currentSrc prop\n            // otherwise we set the URl to avoid having to call this repeatedly every time the thumbnail card is rendered\n            if (result.currentSrc) {\n              thumbnail = {\n                pageNumber: i,\n                currentSrc: result.currentSrc,\n              };\n            } else {\n              thumbnail = {\n                pageNumber: i,\n                url: result.toDataURL(),\n              };\n            }\n            thumbnails.push(thumbnail);\n            setCompletedPagesCount(i);\n            resolve();\n          });\n          inFlightPromiseIds.push(promiseId);\n        });\n        thumbnailPromises.push(thumbnailPromise);\n      }\n\n      await Promise.all(thumbnailPromises);\n      const sortedThumbnails = [...thumbnails].sort((a, b) => a.pageNumber - b.pageNumber);\n      setThumbnails(sortedThumbnails);\n      inFlightPromiseIds.length = 0;\n      onfileLoadedHandler(false);\n    }\n\n    if (document) {\n      generateThumbnails();\n    }\n\n    return () => {\n      inFlightPromiseIds.forEach((id) => document.cancelLoadThumbnail(id));\n    };\n  }, [document]);\n\n  if (thumbnails.length > 0) {\n    return thumbnails.map((thumbnail, index) => {\n      const pageNumber = index + 1;\n      return (\n        <ThumbnailCard key={pageNumber}\n          onChange={() => onThumbnailSelected(pageNumber)}\n          checked={!!selectedThumbnails[pageNumber]}\n          index={index}\n          thumbnail={thumbnail}\n        />\n      );\n    });\n  }\n\n  const pageCount = document ? document.getPageCount() : 0;\n  const processText = `${completedPages}/${pageCount}`;\n  return (<div>{t('message.processing')} {processText}</div>);\n}\n\nexport default PageThumbnailsGrid;","import PageThumbnailsGrid from './PageThumbnailsGrid';\n\nexport default PageThumbnailsGrid;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LEFT_HEADER_WIDTH\":\"41px\",\"RIGHT_HEADER_WIDTH\":\"41px\"};"],"sourceRoot":""}