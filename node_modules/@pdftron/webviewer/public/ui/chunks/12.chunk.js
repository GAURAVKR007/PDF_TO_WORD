(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1497:function(e,t,n){e.exports={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"}},1527:function(e,t,n){"use strict";n.r(t);n(36),n(62),n(137),n(35),n(30),n(6),n(54),n(57),n(23),n(24),n(7),n(157),n(8),n(9),n(75),n(132),n(18),n(10),n(12),n(11),n(15),n(14),n(19),n(17);var a=n(0),o=n.n(a),r=n(16),i=n.n(r),c=n(5),l=n(394),s=n(1),u=n(2),d=n(3),f=n(51),m=n(131),E=n(1422),b=n(73),g=n(45),A=n(44),p=n(13),v=n(149),h=n(231),N=n(141),O=n(20),y=n(121);n(1497);function T(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,r,i,c=[],l=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=r.call(n)).done)&&(c.push(a.value),c.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var j="filterAnnotModal",F=function(){var e=S(Object(c.e)((function(e){return[d.a.isElementDisabled(e,p.a.FILTER_MODAL),d.a.isElementOpen(e,p.a.FILTER_MODAL),d.a.getColorMap(e),d.a.getSelectedTab(e,j),d.a.getAnnotationFilters(e)]})),5),t=e[0],n=e[1],r=e[2],L=e[3],F=e[4],_=S(Object(l.a)(),1)[0],I=Object(c.d)(),k=S(Object(a.useState)([]),2),M=k[0],R=k[1],C=S(Object(a.useState)([]),2),D=C[0],U=C[1],x=S(Object(a.useState)([]),2),P=x[0],B=x[1],G=S(Object(a.useState)([]),2),H=G[0],V=G[1],W=S(Object(a.useState)([]),2),J=W[0],Y=W[1],$=S(Object(a.useState)([]),2),q=$[0],z=$[1],K=S(Object(a.useState)([]),2),Q=K[0],X=K[1],Z=S(Object(a.useState)(!0),2),ee=Z[0],te=Z[1],ne=S(Object(a.useState)(!1),2),ae=ne[0],oe=ne[1],re=S(Object(a.useState)([]),2),ie=re[0],ce=re[1],le=S(Object(a.useState)(0),2),se=le[0],ue=le[1],de=S(Object(a.useState)(!1),2),fe=de[0],me=de[1],Ee=function(e){var t,n=Object(A.g)(e);return e[null===(t=r[n])||void 0===t?void 0:t.iconColor]},be=function(e,t){var n=e.map((function(e){return Object.assign({R:parseInt("".concat(e[1]).concat(e[2]),16),G:parseInt("".concat(e[3]).concat(e[4]),16),B:parseInt("".concat(e[5]).concat(e[6]),16)})}));return!!n.filter((function(e){return Math.abs(t.R-e.R)<10&&Math.abs(t.G-e.G)<10&&Math.abs(t.B-e.B)<10})).length},ge=function(){var e=function(e){var t=!0,n=!0,a=!0,o=!0;if(q.length>0&&(t=q.includes(Object(h.a)(e))),J.length>0&&!(n=J.includes(s.a.getDisplayAuthor(e.Author)))&&ee){var r,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}(e.getReplies());try{for(i.s();!(r=i.n()).done;){var c=r.value;if(J.includes(s.a.getDisplayAuthor(c.Author))){n=!0;break}}}catch(e){i.e(e)}finally{i.f()}}if(Q.length>0){var l=Ee(e);a=l?be(Q,l):Q.includes("#485056")}return ie.length>0&&(o=e.getStatus()?ie.includes(e.getStatus()):ie.includes("None")),t&&n&&a&&o};I(u.a.setCustomNoteFilter(e)),I(u.a.setAnnotationFilters({includeReplies:ee,authorFilter:J,colorFilter:Q,typeFilter:q,statusFilter:ie}));var t=[];ae?s.a.getAnnotationManager().getAnnotationsList().forEach((function(n){var a=!e(n);a!==n.NoView&&(n.NoView=a,t.push(n))})):s.a.getAnnotationManager().getAnnotationsList().forEach((function(e){!0===e.NoView&&(e.NoView=!1,t.push(e))})),s.a.getAnnotationManager().drawAnnotationsFromList(t),Object(f.a)(g.a.ANNOTATION_FILTER_CHANGED,{types:q,authors:J,colors:Q,statuses:ie,checkRepliesForAuthorFilter:ee}),pe()},Ae=function(){te(!1),Y([]),z([]),X([]),ce([]);var e=[];s.a.getAnnotationManager().getAnnotationsList().forEach((function(t){!0===t.NoView&&(t.NoView=!1,e.push(t))})),s.a.getAnnotationManager().drawAnnotationsFromList(e)},pe=function(){I(u.a.closeElement(p.a.FILTER_MODAL)),s.a.setToolMode(b.a)};Object(a.useEffect)((function(){var e=function(){Ae(),ge()};return s.a.addEventListener("documentUnloaded",e),function(){s.a.removeEventListener("documentUnloaded",e)}}),[]),Object(a.useEffect)((function(){var e=s.a.getAnnotationsList(),t=new Set,n=new Set,a=new Set,o=new Set;return e.forEach((function(e){var r=s.a.getDisplayAuthor(e.Author);if(r&&""!==r&&t.add(r),!(e instanceof window.Core.Annotations.WidgetAnnotation||e instanceof window.Core.Annotations.StickyAnnotation&&e.isReply()||e instanceof window.Core.Annotations.Link)){n.add(Object(h.a)(e));var i=Ee(e);i&&!be(T(a),i)&&a.add(Object(v.c)(i.R,i.G,i.B,i.A)),e.getStatus()?o.add(e.getStatus()):o.add("None")}})),R(T(t)),U(T(n)),B(T(a)),V(T(o)),s.a.addEventListener("documentUnloaded",pe),function(){s.a.removeEventListener("documentUnloaded",pe)}}),[n]),Object(a.useEffect)((function(){L!==p.a.ANNOTATION_STATUS_FILTER_PANEL_BUTTON||fe||I(u.a.setSelectedTab(j,p.a.ANNOTATION_USER_FILTER_PANEL_BUTTON))}),[n,L,fe]),Object(a.useEffect)((function(){ue((ee?1:0)+J.length+Q.length+q.length+ie.length)}),[ee,J,Q,q,ie]),Object(a.useEffect)((function(){me(H.length>1||1===H.length&&"None"!==H[0])}),[H]),Object(a.useEffect)((function(){n&&(te(F.includeReplies),Y(F.authorFilter),X(F.colorFilter),z(F.typeFilter),ce(F.statusFilter))}),[n]);var ve=i()({Modal:!0,FilterAnnotModal:!0,open:n,closed:!n});return t?null:o.a.createElement("div",{className:ve,"data-element":p.a.FILTER_MODAL,onMouseDown:pe},o.a.createElement(E.a,{locked:n,focusLastOnUnlock:!0},o.a.createElement("div",{className:"container",onMouseDown:function(e){return e.stopPropagation()}},s.a.getAnnotationsList().length>0?o.a.createElement("div",{className:"filter-modal"},o.a.createElement(m.a,{onSwipedDown:pe,preventDefaultTouchmoveEvent:!0},o.a.createElement("div",{className:"swipe-indicator"}),o.a.createElement("div",{className:"header"},o.a.createElement("div",null,"".concat(_("option.filterAnnotModal.filters")," (").concat(se,")")),o.a.createElement(O.a,{img:"icon-close",onClick:pe,title:"action.close"}))),o.a.createElement("div",{className:"divider"}),o.a.createElement("div",{className:"body"},o.a.createElement(y.d,{id:j},o.a.createElement("div",{className:"tab-list"},o.a.createElement(y.a,{dataElement:p.a.ANNOTATION_USER_FILTER_PANEL_BUTTON},o.a.createElement("button",{className:"tab-options-button"},_("option.filterAnnotModal.user"))),o.a.createElement("div",{className:"tab-options-divider"}),o.a.createElement(y.a,{dataElement:p.a.ANNOTATION_COLOR_FILTER_PANEL_BUTTON},o.a.createElement("button",{className:"tab-options-button"},_("option.filterAnnotModal.color"))),o.a.createElement("div",{className:"tab-options-divider"}),o.a.createElement(y.a,{dataElement:p.a.ANNOTATION_TYPE_FILTER_PANEL_BUTTON},o.a.createElement("button",{className:"tab-options-button"},_("option.filterAnnotModal.type"))),fe&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"tab-options-divider"}),o.a.createElement(y.a,{dataElement:p.a.ANNOTATION_STATUS_FILTER_PANEL_BUTTON},o.a.createElement("button",{className:"tab-options-button"},_("option.filterAnnotModal.status"))))),o.a.createElement("div",{className:"filter-options"},o.a.createElement(y.c,{dataElement:"annotationUserFilterPanel"},o.a.createElement("div",{className:"user-filters three-column-filter"},T(M).map((function(e,t){return o.a.createElement(N.a,{type:"checkbox",key:t,label:e,checked:J.includes(e),id:e,onChange:function(e){-1===J.indexOf(e.target.getAttribute("id"))?Y([].concat(T(J),[e.target.getAttribute("id")])):Y(J.filter((function(t){return t!==e.target.getAttribute("id")})))}})})))),o.a.createElement(y.c,{dataElement:"annotationColorFilterPanel"},o.a.createElement("div",{className:"color-filters"},T(P).map((function(e,t){return o.a.createElement("div",{className:"colorSelect",key:"color".concat(t)},o.a.createElement(N.a,{type:"checkbox",checked:Q.includes(e),id:e,onChange:function(e){-1===Q.indexOf(e.target.getAttribute("id"))?X([].concat(T(Q),[e.target.getAttribute("id")])):X(Q.filter((function(t){return t!==e.target.getAttribute("id")})))}}),o.a.createElement("div",{className:"colorCell",style:{background:Object(v.a)(e)}}))})))),o.a.createElement(y.c,{dataElement:"annotationTypeFilterPanel"},o.a.createElement("div",{className:"type-filters three-column-filter"},T(D).sort((function(e,t){return _("annotation.".concat(e))<=_("annotation.".concat(t))?-1:1})).map((function(e,t){return o.a.createElement(N.a,{type:"checkbox",key:t,label:_("annotation.".concat(e)),checked:q.includes(e),id:e,onChange:function(e){-1===q.indexOf(e.target.getAttribute("id"))?z([].concat(T(q),[e.target.getAttribute("id")])):z(q.filter((function(t){return t!==e.target.getAttribute("id")})))}})})))),fe&&o.a.createElement(y.c,{dataElement:"annotationStatusFilterPanel"},o.a.createElement("div",{className:"status-filters three-column-filter"},T(H).map((function(e,t){return o.a.createElement(N.a,{type:"checkbox",key:t,checked:ie.includes(e),label:_("option.state.".concat(e.toLocaleLowerCase())),id:e,onChange:function(e){-1===ie.indexOf(e.target.getAttribute("id"))?ce([].concat(T(ie),[e.target.getAttribute("id")])):ce(ie.filter((function(t){return t!==e.target.getAttribute("id")})))}})}))))))),o.a.createElement("div",{className:"divider"}),o.a.createElement("div",{className:"settings-body"},o.a.createElement("div",{className:"settings-header"},_("option.filterAnnotModal.filterSettings")),o.a.createElement("div",{className:"settings"},o.a.createElement(N.a,{label:_("option.filterAnnotModal.includeReplies"),checked:ee,onChange:function(e){return te(e.target.checked)},id:"filter-annot-modal-include-replies"}),o.a.createElement(N.a,{label:_("option.filterAnnotModal.filterDocument"),checked:ae,onChange:function(e){return oe(e.target.checked)},id:"filter-annot-modal-filter-document"}))),o.a.createElement("div",{className:"divider"}),o.a.createElement("div",{className:"footer"},o.a.createElement(O.a,{className:"filter-annot-clear",onClick:Ae,label:_("action.clearAll"),disabled:0===se}),o.a.createElement(O.a,{className:"filter-annot-apply",onClick:ge,label:_("action.apply")}))):o.a.createElement("div",null,o.a.createElement("div",{className:"swipe-indicator"}),o.a.createElement("div",{className:"message"},_("message.noAnnotationsFilter"))))))};t.default=F}}]);
//# sourceMappingURL=12.chunk.js.map