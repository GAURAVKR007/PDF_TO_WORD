(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1500:function(e,t,n){e.exports={LEFT_HEADER_WIDTH:"41px",RIGHT_HEADER_WIDTH:"41px"}},1524:function(e,t,n){"use strict";n.r(t);n(180),n(168),n(122),n(17),n(1498),n(28),n(36),n(18),n(10),n(12),n(6),n(11),n(7),n(8),n(9),n(15),n(14),n(19);var r=n(0),a=n.n(r),o=n(16),l=n.n(o),i=n(5),u=n(394),c=n(20),s=n(1),f=n(44),m=n(174);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=d(e.split("/"),2),n=t[0],r=t[1];return Number(n)/Number(r)},p=n(2),y=n(3),E=n(131),g=n(13);n(1500);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=function(e){var t=e.Measure.axis[0].factor;switch(e.Scale[1][1]){case"ft-in":return e.getLineLength()*t/12;case"in":default:return e.getLineLength()*t}},S=/^\d*(\.\d*)?$/,j=/^\d*(\s\d\/\d*)$/,w=/^(\d\/\d*)*$/,N=function(){var e=O(Object(i.e)((function(e){return[y.a.isElementOpen(e,g.a.CALIBRATION_MODAL),y.a.isElementDisabled(e,g.a.CALIBRATION_MODAL),y.a.getMeasurementUnits(e)]}),i.c),3),t=e[0],n=e[1],o=e[2],d=Object(i.d)(),v=O(Object(r.useState)(null),2),h=v[0],N=v[1],I=O(Object(r.useState)(""),2),L=I[0],M=I[1],_=O(Object(r.useState)(0),2),D=_[0],C=_[1],T=O(Object(r.useState)(""),2),F=T[0],x=T[1],R=O(Object(r.useState)(!1),2),B=R[0],H=R[1],$=O(Object(u.a)(),1)[0],k=Object(r.useRef)(null);Object(r.useEffect)((function(){var e;t&&(null==k||null===(e=k.current)||void 0===e||e.focus()),U(s.a.getSelectedAnnotations())}),[t]),Object(r.useEffect)((function(){var e=function(e,t){"selected"===t?U(e):"deselected"===t&&(N(null),M(""),x(""),C(0))};return s.a.addEventListener("annotationSelected",e),function(){return s.a.removeEventListener("annotationSelected",e)}}),[]),Object(r.useEffect)((function(){var e=function(e,t){"modify"===t&&1===e.length&&e[0]===h&&(M(A(h).toFixed(2)),x(h.Scale[1][1]))};return s.a.addEventListener("annotationChanged",e),function(){return s.a.removeEventListener("annotationChanged",e)}}),[h]);var U=function(e){if(1===(null==e?void 0:e.length)&&"distanceMeasurement"===Object(f.g)(e[0])){var t=e[0];N(t);var n=A(t).toFixed(2);M(n),x(t.Scale[1][1]),C(parseFloat(n))}},J=function(e){return h.Scale=e,W()},W=function(){var e=A(h),t=D/e,n=h.Scale;return[[n[0][0],n[0][1]],[n[1][0]*t,F]]},G=function(){d(p.a.closeElements([g.a.CALIBRATION_MODAL]))};return n||!h?null:a.a.createElement(E.a,{onSwipedUp:G,onSwipedDown:G,preventDefaultTouchmoveEvent:!0},a.a.createElement("div",{className:l()({Modal:!0,CalibrationModal:!0,open:t,closed:!t}),onMouseDown:G}," ",a.a.createElement("div",{className:"container",onMouseDown:function(e){return e.stopPropagation()}},a.a.createElement("div",{className:"swipe-indicator"}),a.a.createElement("div",{className:"calibration__header"},$("component.calibration")),a.a.createElement("div",{className:"calibration__body"},a.a.createElement("div",null,$("message.enterMeasurement")),a.a.createElement("div",{className:"calibration__input"},a.a.createElement("input",{className:B?"error":"",ref:k,type:"text",value:L,onChange:function(e){H(!1),M(e.target.value)},onBlur:function(e){var t=e.target.value.trim();if(""===t&&H(!0),S.test(t))0!==parseFloat(t)?(C(parseFloat(t)),M(t)):H(!0);else if(j.test(t)){var n=O(t.split(" "),2),r=n[0],a=n[1];if(Number.isFinite(b(a))){var o=Number(r)+b(a);C(parseFloat(o)),M(o)}else H(!0)}else if(w.test(t))if(Number.isFinite(b(t))){var l=b(t);C(parseFloat(l)),M(l)}else H(!0);else H(!0)}}),a.a.createElement("select",{className:"unitToInput",value:F,onChange:function(e){x(e.target.value)}},o.to.map((function(e){return a.a.createElement("option",{key:e,value:e},e)})))),B?a.a.createElement("div",{className:"errorMeasurement"},$("message.errorEnterMeasurement")):null),a.a.createElement("div",{className:"calibration__footer"},a.a.createElement(c.a,{dataElement:"passwordSubmitButton",label:$("action.apply"),onClick:function(){var e=W(),t=J(e);s.a.setAnnotationStyles(h,{Scale:t}),Object(m.a)("AnnotationCreateDistanceMeasurement","Scale",t),d(p.a.closeElements([g.a.CALIBRATION_MODAL]))},disabled:B})))))};t.default=N}}]);
//# sourceMappingURL=10.chunk.js.map